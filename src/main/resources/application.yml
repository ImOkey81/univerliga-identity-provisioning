spring:
  application:
    name: univerliga-identity-provisioning
  datasource:
    url: ${DB_URL:jdbc:postgresql://localhost:5433/provisioning}
    username: ${DB_USER:${DB_USERNAME:provisioning}}
    password: ${DB_PASS:${DB_PASSWORD:provisioning}}
  jpa:
    hibernate:
      ddl-auto: validate
    open-in-view: false
    properties:
      hibernate:
        format_sql: false
  flyway:
    enabled: true
  rabbitmq:
    host: ${RABBIT_HOST:localhost}
    port: ${RABBIT_PORT:5672}
    username: ${RABBIT_USER:guest}
    password: ${RABBIT_PASS:${RABBIT_PASSWORD:guest}}
  security:
    oauth2:
      resourceserver:
        jwt:
          issuer-uri: ${KEYCLOAK_ISSUER_URI:http://localhost:8081/realms/univerliga}

server:
  port: ${SERVER_PORT:8080}

management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus

springdoc:
  swagger-ui:
    path: /swagger-ui.html

app:
  build-version: ${APP_VERSION:0.1.0}
  api-version: v1
  provisioning:
    mode: ${PROVISIONING_MODE:mock-crm}
    broker:
      exchange: ${CRM_EXCHANGE:univerliga.crm.events}
      queue: ${CRM_QUEUE:univerliga.provisioning.inbox}
      dlq: ${CRM_DLQ:univerliga.provisioning.dlq}
      routing-created: ${CRM_ROUTING_CREATED:crm.person.created}
      routing-updated: ${CRM_ROUTING_UPDATED:crm.person.updated}
      routing-deactivated: ${CRM_ROUTING_DEACTIVATED:crm.person.deactivated}
      max-retries: ${CRM_MAX_RETRIES:5}
      max-fail-count: ${CRM_MAX_FAIL_COUNT:10}
  keycloak:
    base-url: ${KEYCLOAK_URL:http://localhost:8081}
    realm: ${KEYCLOAK_REALM:univerliga}
    client-id: ${KEYCLOAK_CLIENT_ID:univerliga-provisioning}
    client-secret: ${KEYCLOAK_CLIENT_SECRET:provisioning-secret}
    connect-timeout-ms: ${KEYCLOAK_CONNECT_TIMEOUT_MS:5000}
    read-timeout-ms: ${KEYCLOAK_READ_TIMEOUT_MS:10000}

logging:
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss.SSS} %-5level [%thread] [req:%X{requestId}] [event:%X{eventId}] %logger{36} - %msg%n"
